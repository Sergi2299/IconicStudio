<!-- ... hasta donde tengas el formulario igual ... -->
<form id="formulario-contacto">
  <input type="text" name="nombre" placeholder="Tu nombre" required />
  <input type="email" name="email" placeholder="Tu email" required />
  <textarea name="mensaje" placeholder="Escribe tu mensaje..." rows="5" required></textarea>

  <!-- Captcha mejorado -->
  <label for="captchaInput" id="captchaLabel" style="font-weight:bold; margin-top: 15px; display: block;">Resolver: </label>
  <input type="number" id="captchaInput" placeholder="Escribe el resultado" required />

  <button type="submit">Enviar mensaje</button>
</form>

<div id="mensaje-enviado" style="display: none; margin-top: 20px; color: green; font-weight: bold;">
  ¡Gracias por confiar en nosotros! En breves te contactaremos.
</div>

<!-- Script mejorado de captcha -->
<script>
  const captchaLabel = document.getElementById("captchaLabel");
  const captchaInput = document.getElementById("captchaInput");

  let resultadoCorrecto = 0;

  function generarCaptcha() {
    const operadores = ["+", "-", "*"];
    const operador = operadores[Math.floor(Math.random() * operadores.length)];
    const num1 = Math.floor(Math.random() * 10) + 1;
    const num2 = Math.floor(Math.random() * 10) + 1;

    let operacionTexto = `${num1} ${operador} ${num2}`;
    resultadoCorrecto = eval(operacionTexto);

    // Reemplazamos * por × para mostrar bonito
    captchaLabel.textContent = `Resolver: ${operacionTexto.replace("*", "×")} = ?`;
    captchaInput.value = "";
  }

  generarCaptcha();

  document.getElementById("formulario-contacto").addEventListener("submit", function (e) {
    e.preventDefault();

    if (parseInt(captchaInput.value, 10) !== resultadoCorrecto) {
      alert("Respuesta incorrecta del captcha. Intenta de nuevo.");
      generarCaptcha();
      return;
    }

    const formData = new FormData(this);

    fetch("https://formsubmit.co/ajax/sergifenollar88@gmail.com", {
      method: "POST",
      body: formData,
      headers: {
        'Accept': 'application/json'
      }
    }).then(response => {
      if (response.ok) {
        this.reset();
        generarCaptcha();
        document.getElementById("mensaje-enviado").style.display = "block";
      } else {
        alert("Ocurrió un error al enviar el mensaje.");
      }
    }).catch(error => {
      alert("Error al enviar el formulario. Intenta de nuevo.");
    });
  });
</script>

