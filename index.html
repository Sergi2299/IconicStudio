<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Iconic Studio</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet" />
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32" />
</head>
<body>
  <header>
    <div class="header-container">
      <img src="logo.png" alt="Iconic Studio Logo" class="logo-img" />
      <div class="header-texto">
        <h1>Iconic Studio</h1>
        <p>Tu imagina, nosotros creamos</p>
      </div>
    </div>
  </header>

  <nav>
    <a href="#servicios">Servicios</a>
    <a href="#galeria">Galería</a>
    <a href="#contacto">Contacto</a>
  </nav>

  <section id="servicios">
    <h2>¿Qué ofrecemos?</h2>
    <div class="servicio">
      <h3>Diseño de logos</h3>
      <p>Diseñamos tu logo profesional desde cero, con estilo moderno y adaptado a tu marca.</p>
    </div>
    <div class="servicio">
      <h3>Creación de páginas web</h3>
      <p>Desarrollamos páginas responsive y atractivas para empresas, autónomos o emprendedores.</p>
    </div>
  </section>

  <section id="galeria">
    <h2>Proyectos recientes</h2>
    <div class="imagenes">
      <img src="logo1.jpg" alt="Logo 1" />
      <img src="logo2.jpg" alt="Logo 2" />
      <img src="logo3.png" alt="Logo 3" />
    </div>
  </section>

  <section id="contacto">
    <h2>Contáctanos</h2>
    <form id="formulario-contacto">
      <input type="text" name="nombre" placeholder="Tu nombre" required />
      <input type="email" name="email" placeholder="Tu email" required />
      <textarea name="mensaje" placeholder="Escribe tu mensaje..." rows="5" required></textarea>
      
      <!-- Captcha -->
      <label for="captchaInput">Por favor, escribe este número: <span id="captcha"></span></label>
      <input type="text" id="captchaInput" placeholder="Escribe el número" required />
      
      <button type="submit">Enviar mensaje</button>
    </form>

    <div id="mensaje-enviado" style="display: none; margin-top: 20px; color: green; font-weight: bold;">
      ¡Gracias por confiar en nosotros! En breves te contactaremos.
    </div>
  </section>

  <!-- Aviso de cookies -->
  <div id="cookie-consent" class="cookie-consent" style="display:none;">
    <p>Este sitio web utiliza cookies para mejorar tu experiencia. Al continuar navegando aceptas nuestra <a href="privacidad.html" target="_blank">Política de Privacidad</a> y el <a href="aviso-legal.html" target="_blank">Aviso Legal</a>.</p>
    <button id="aceptar-cookies">Aceptar</button>
  </div>

  <footer>
    &copy; 2025 Iconic Studio. Todos los derechos reservados.
  </footer>

  <script>
    // Generar captcha aleatorio de 4 números y mostrarlo
    function generarCaptcha() {
      return Math.floor(1000 + Math.random() * 9000).toString();
    }

    const captchaElement = document.getElementById('captcha');
    const captchaInput = document.getElementById('captchaInput');
    let captchaCodigo = generarCaptcha();
    captchaElement.textContent = captchaCodigo;

    // Validar formulario y captcha
    document.getElementById("formulario-contacto").addEventListener("submit", function (e) {
      e.preventDefault();

      if (captchaInput.value !== captchaCodigo) {
        alert("Captcha incorrecto, por favor inténtalo de nuevo.");
        captchaCodigo = generarCaptcha();
        captchaElement.textContent = captchaCodigo;
        captchaInput.value = "";
        captchaInput.focus();
        return;
      }

      const formData = new FormData(this);

      fetch("https://formsubmit.co/ajax/sergifenollar88@gmail.com", {
        method: "POST",
        body: formData,
        headers: {
          'Accept': 'application/json'
        }
      }).then(response => {
        if (response.ok) {
          this.reset();
          captchaCodigo = generarCaptcha();
          captchaElement.textContent = captchaCodigo;
          document.getElementById("mensaje-enviado").style.display = "block";
        } else {
          alert("Ocurrió un error al enviar el mensaje.");
        }
      }).catch(error => {
        alert("Error al enviar el formulario. Intenta de nuevo.");
      });
    });

    // Aviso de cookies
    const cookieConsent = document.getElementById('cookie-consent');
    const aceptarCookiesBtn = document.getElementById('aceptar-cookies');

    function setCookie(name, value, days) {
      const d = new Date();
      d.setTime(d.getTime() + (days*24*60*60*1000));
      const expires = "expires="+ d.toUTCString();
      document.cookie = name + "=" + value + ";" + expires + ";path=/";
    }

    function getCookie(name) {
      const cname = name + "=";
      const decodedCookie = decodeURIComponent(document.cookie);
      const ca = decodedCookie.split(';');
      for(let i = 0; i < ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0) === ' ') c = c.substring(1);
        if (c.indexOf(cname) === 0) return c.substring(cname.length, c.length);
      }
      return "";
    }

    function checkCookieConsent() {
      const consent = getCookie("cookieConsent");
      if (consent !== "accepted") {
        cookieConsent.style.display = "flex";
      }
    }

    aceptarCookiesBtn.addEventListener("click", () => {
      setCookie("cookieConsent", "accepted", 365);
      cookieConsent.style.display = "none";
    });

    // Comprobar si mostrar aviso cookies al cargar la página
    window.onload = () => {
      checkCookieConsent();
    };
  </script>
</body>
</html>
