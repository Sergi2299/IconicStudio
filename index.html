<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contacto - SaV</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="logo.png" type="image/png" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet" />
</head>
<body>

  <!-- Encabezado -->
  <header>
    <div class="header-container">
      <img src="logo.png" alt="Logo SaV" class="logo-img" />
      <div class="header-texto">
        <h1>SaV - Sergi and Videogames</h1>
        <p>Tu universo de videojuegos</p>
      </div>
    </div>
  </header>

  <!-- Navegación -->
  <nav>
    <a href="index.html">Inicio</a>
    <a href="productos.html">Galería</a>
    <a href="presupuesto.html">Presupuesto</a>
    <a href="contacto.html">Contacto</a>
  </nav>

  <!-- Sección de contacto -->
  <section>
    <h2>Contáctanos</h2>
    <form id="formulario-contacto">
      <input type="text" name="nombre" placeholder="Tu nombre" required />
      <input type="email" name="email" placeholder="Tu email" required />
      <textarea name="mensaje" placeholder="Escribe tu mensaje..." rows="5" required></textarea>

      <!-- CAPTCHA amigable -->
      <label for="captchaInput" id="captchaLabel" style="font-weight:bold; margin-top: 15px; display: block;">Resolver: </label>
      <input type="number" id="captchaInput" placeholder="Resultado" required />

      <button type="submit">Enviar mensaje</button>
    </form>

    <div id="mensaje-enviado" style="display: none; margin-top: 20px; color: green; font-weight: bold;">
      ¡Gracias por confiar en nosotros! En breves te contactaremos.
    </div>
  </section>

  <footer>
    &copy; 2025 SaV - Todos los derechos reservados.
  </footer>

  <script>
    const captchaLabel = document.getElementById("captchaLabel");
    const captchaInput = document.getElementById("captchaInput");
    let resultadoCorrecto = 0;

    function generarCaptcha() {
      const operadores = ["+", "-"];
      const operador = operadores[Math.floor(Math.random() * operadores.length)];
      let num1 = Math.floor(Math.random() * 20) + 1;
      let num2 = Math.floor(Math.random() * 20) + 1;

      if (operador === "-" && num2 > num1) {
        [num1, num2] = [num2, num1]; // Para que el resultado no sea negativo
      }

      resultadoCorrecto = eval(`${num1} ${operador} ${num2}`);
      captchaLabel.textContent = `Resolver: ${num1} ${operador} ${num2} = ?`;
      captchaInput.value = "";
    }

    generarCaptcha();

    document.getElementById("formulario-contacto").addEventListener("submit", function (e) {
      e.preventDefault();

      if (parseInt(captchaInput.value, 10) !== resultadoCorrecto) {
        alert("Respuesta incorrecta del captcha. Intenta de nuevo.");
        generarCaptcha();
        return;
      }

      const formData = new FormData(this);

      fetch("https://formsubmit.co/ajax/sergifenollar88@gmail.com", {
        method: "POST",
        body: formData,
        headers: {
          'Accept': 'application/json'
        }
      }).then(response => {
        if (response.ok) {
          this.reset();
          generarCaptcha();
          document.getElementById("mensaje-enviado").style.display = "block";
        } else {
          alert("Ocurrió un error al enviar el mensaje.");
        }
      }).catch(error => {
        alert("Error al enviar el formulario. Intenta de nuevo.");
      });
    });
  </script>
</body>
</html>
